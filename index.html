<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Catan Helper - Cities & Knights Companion</title>
  <meta name="description" content="A mobile-friendly helper for Settlers of Catan: Cities & Knights. Track resources, see what you can build, and get progress card descriptions.">
  <meta name="theme-color" content="#722f37">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>‚öîÔ∏è</text></svg>">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --parchment-light: #f4e4bc;
      --parchment-mid: #e8d4a8;
      --burgundy: #722f37;
      --burgundy-dark: #4a1f24;
      --gold: #c9a227;
      --text-dark: #2c1810;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Crimson Text', Georgia, serif;
      font-size: 18px;
      line-height: 1.6;
      color: var(--text-dark);
      background: linear-gradient(135deg, #2c1810 0%, #4a3628 50%, #2c1810 100%);
      min-height: 100vh;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    .header {
      text-align: center;
      margin-bottom: 40px;
    }

    .title {
      font-family: 'Cinzel', serif;
      font-size: 2.5rem;
      color: var(--gold);
      text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
    }

    .subtitle {
      color: var(--parchment-light);
      font-style: italic;
      margin-top: 8px;
      font-size: 1.1rem;
    }

    .panel {
      background: linear-gradient(145deg, var(--parchment-light) 0%, var(--parchment-mid) 100%);
      border-radius: 12px;
      padding: 24px;
      margin-bottom: 24px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      border: 3px solid var(--burgundy);
    }

    h2 {
      font-family: 'Cinzel', serif;
      color: var(--burgundy);
      border-bottom: 2px solid var(--burgundy);
      padding-bottom: 10px;
      margin-bottom: 16px;
      font-size: 1.3rem;
    }

    .bookmarklet-link {
      display: inline-block;
      padding: 18px 36px;
      background: linear-gradient(180deg, var(--burgundy), var(--burgundy-dark));
      color: var(--gold);
      text-decoration: none;
      border-radius: 10px;
      font-family: 'Cinzel', serif;
      font-size: 1.3rem;
      font-weight: 600;
      border: 2px solid var(--gold);
      cursor: move;
      transition: transform 0.2s, box-shadow 0.2s;
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
    }

    .bookmarklet-link:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
    }

    .bookmarklet-container {
      text-align: center;
      padding: 30px;
      background: rgba(255,255,255,0.3);
      border-radius: 8px;
      margin: 20px 0;
    }

    .steps {
      counter-reset: step;
      padding-left: 0;
      list-style: none;
    }

    .steps li {
      position: relative;
      padding-left: 50px;
      margin-bottom: 20px;
    }

    .steps li::before {
      counter-increment: step;
      content: counter(step);
      position: absolute;
      left: 0;
      top: 0;
      width: 36px;
      height: 36px;
      background: var(--burgundy);
      color: var(--gold);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: 'Cinzel', serif;
      font-weight: bold;
    }

    code {
      background: rgba(0,0,0,0.1);
      padding: 2px 8px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 0.9em;
      word-break: break-all;
    }

    .mobile-section {
      background: rgba(33,150,243,0.1);
      border: 2px solid #2196f3;
      border-radius: 8px;
      padding: 20px;
      margin-bottom: 16px;
    }

    .mobile-section h3 {
      color: #1565c0;
      margin-bottom: 12px;
      font-family: 'Cinzel', serif;
    }

    .mobile-section.android {
      border-color: #4caf50;
      background: rgba(76,175,80,0.1);
    }

    .mobile-section.android h3 {
      color: #2e7d32;
    }

    .mobile-steps {
      padding-left: 20px;
      margin: 0;
    }

    .mobile-steps li {
      margin-bottom: 10px;
    }

    .code-box {
      background: #1e1e1e;
      color: #d4d4d4;
      padding: 15px;
      border-radius: 8px;
      font-family: 'Courier New', monospace;
      font-size: 11px;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-all;
      margin: 15px 0;
      max-height: 120px;
      overflow-y: auto;
      user-select: all;
      -webkit-user-select: all;
    }

    .copy-btn {
      background: var(--burgundy);
      color: var(--gold);
      border: none;
      padding: 14px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-family: 'Cinzel', serif;
      font-size: 1rem;
      width: 100%;
      font-weight: 600;
      transition: background 0.2s;
    }

    .copy-btn:hover, .copy-btn:active {
      background: var(--burgundy-dark);
    }

    .features {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
      margin-top: 20px;
    }

    .feature {
      background: rgba(255,255,255,0.4);
      padding: 20px;
      border-radius: 8px;
      text-align: center;
    }

    .feature-icon {
      font-size: 2.2rem;
      margin-bottom: 8px;
    }

    .feature-title {
      font-family: 'Cinzel', serif;
      color: var(--burgundy);
      margin: 0 0 8px 0;
      font-size: 1rem;
    }

    .feature p {
      font-size: 0.9rem;
      margin: 0;
      opacity: 0.9;
    }

    .footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: var(--parchment-mid);
      padding: 20px;
      font-size: 1.2rem;
      gap: 20px;
    }

    .footer-content {
      text-align: center;
      flex: 1;
    }

    .footer a {
      color: var(--gold);
    }

    .lang-selector {
      flex-shrink: 0;
    }

    .lang-select {
      background: var(--burgundy);
      color: var(--gold);
      border: 2px solid var(--gold);
      border-radius: 6px;
      padding: 8px 12px;
      font-family: 'Cinzel', serif;
      font-size: 0.9rem;
      cursor: pointer;
      transition: background 0.2s;
    }

    .lang-select:hover {
      background: var(--burgundy-dark);
    }

    .lang-select:focus {
      outline: none;
      box-shadow: 0 0 0 2px var(--gold);
    }

    .tip {
      background: rgba(255,193,7,0.2);
      border: 1px solid #ffc107;
      padding: 12px 16px;
      border-radius: 8px;
      margin-top: 16px;
      font-size: 0.95rem;
    }

    .tip strong {
      color: #ff8f00;
    }

    @media (max-width: 600px) {
      .container { padding: 16px 8px; }
      .title { font-size: 1.8rem; }
      .panel { padding: 16px; margin-bottom: 16px; }
      .steps li { padding-left: 45px; }
      .bookmarklet-link { padding: 14px 28px; font-size: 1.1rem; }
      .bookmarklet-container { padding: 20px 16px; }
      .mobile-section { padding: 16px; }
      .feature { padding: 16px; }
    }
  </style>
</head>
<body>
  <div class="container">
    <header class="header">
      <h1 class="title">‚öîÔ∏è <span data-i18n="title">Catan Helper</span></h1>
      <p class="subtitle" data-i18n="subtitle">Cities & Knights Companion Tool</p>
    </header>

    <section class="panel">
      <h2>üñ•Ô∏è <span data-i18n="desktopInstall">Desktop Installation</span></h2>
      <p data-i18n="dragToBookmarks">Drag this button to your bookmarks bar:</p>

      <div class="bookmarklet-container">
        <a class="bookmarklet-link" id="bookmarkletLink" href="#">
          ‚öîÔ∏è <span data-i18n="catanHelper">Catan Helper</span>
        </a>
        <p style="margin-top: 16px; font-size: 0.95rem; opacity: 0.8;" data-i18n="or">or</p>
        <button class="copy-btn" style="margin-top: 12px; width: auto; padding: 12px 24px;" onclick="copyCode(this)">üìã <span data-i18n="copyToClipboard">Copy to Clipboard</span></button>
      </div>

      <div class="tip">
        <strong>üí° <span data-i18n="tipLabel">Tip:</span></strong> <span data-i18n="bookmarksTip">Can't see your bookmarks bar? Press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac) to show it. Alternatively, copy the code and paste it as a bookmark URL.</span>
      </div>

      <div class="tip" style="background: rgba(76,175,80,0.2); border-color: #4caf50;">
        <strong style="color: #4caf50;" data-i18n="autoUpdates">Auto-Updates:</strong> <span data-i18n="autoUpdatesTip">Install once, always get the latest version! The tiny loader fetches the newest code automatically every time you use it.</span>
      </div>
    </section>

    <section class="panel">
      <h2>üì± <span data-i18n="mobileInstall">Mobile Installation</span></h2>

      <div class="mobile-section">
        <h3>üçé <span data-i18n="iphoneSafari">iPhone / Safari</span></h3>
        <ol class="mobile-steps">
          <li data-i18n="iphoneStep1">Tap <strong>"Copy Code"</strong> below</li>
          <li data-i18n="iphoneStep2">Bookmark any page (Share ‚Üí Add Bookmark)</li>
          <li data-i18n="iphoneStep3">Open Bookmarks, find it, tap <strong>Edit</strong></li>
          <li data-i18n="iphoneStep4">Delete the URL, <strong>paste the code</strong></li>
          <li data-i18n="iphoneStep5">Save!</li>
        </ol>
      </div>

      <div class="mobile-section android">
        <h3>ü§ñ <span data-i18n="androidChrome">Android / Chrome</span></h3>
        <ol class="mobile-steps">
          <li data-i18n="androidStep1">Tap <strong>"Copy Code"</strong> below</li>
          <li data-i18n="androidStep2">Tap ‚ãÆ ‚Üí Bookmarks ‚Üí ‚ãÆ on any bookmark ‚Üí Edit</li>
          <li data-i18n="androidStep3">Replace URL with <strong>pasted code</strong></li>
          <li data-i18n="androidStep4">Or create new bookmark and paste as URL</li>
        </ol>
      </div>

      <div class="code-box" id="codeBox">Loading...</div>
      <button class="copy-btn" onclick="copyCode(this)">üìã <span data-i18n="copyCode">COPY CODE</span></button>
    </section>

    <section class="panel">
      <h2>üéÆ <span data-i18n="howToUse">How to Use</span></h2>
      <ol class="steps">
        <li>
          <strong data-i18n="step1Title">Open your Catan game</strong><br>
          <span data-i18n="step1Desc">Go to your game at <code>g.csdu.co.uk</code></span>
        </li>
        <li>
          <strong data-i18n="step2Title">Activate the helper</strong><br>
          <span data-i18n="step2Desc">Click the bookmarklet (desktop) or type its name in the URL bar (mobile)</span>
        </li>
        <li>
          <strong data-i18n="step3Title">View your dashboard</strong><br>
          <span data-i18n="step3Desc">See resources, building options, dev tracks & card descriptions</span>
        </li>
      </ol>

      <div class="tip">
        <strong>üì± <span data-i18n="mobileTipLabel">Mobile tip:</span></strong> <span data-i18n="mobileTip">The helper covers the full screen. Tap "Show Game" to see the board, run the bookmarklet again to bring back the helper.</span>
      </div>
    </section>

    <section class="panel">
      <h2>‚ú® <span data-i18n="features">Features</span></h2>
      <div class="features">
        <div class="feature">
          <div class="feature-icon">üì¶</div>
          <h3 class="feature-title" data-i18n="resourcesTitle">Resources</h3>
          <p data-i18n="resourcesDesc">All resources & commodities at a glance</p>
        </div>
        <div class="feature">
          <div class="feature-icon">üèõÔ∏è</div>
          <h3 class="feature-title" data-i18n="devTracksTitle">Dev Tracks</h3>
          <p data-i18n="devTracksDesc">Trade, Science & Politics levels</p>
        </div>
        <div class="feature">
          <div class="feature-icon">üî®</div>
          <h3 class="feature-title" data-i18n="buildGuideTitle">Build Guide</h3>
          <p data-i18n="buildGuideDesc">See what you can afford to build</p>
        </div>
        <div class="feature">
          <div class="feature-icon">üìú</div>
          <h3 class="feature-title" data-i18n="cardInfoTitle">Card Info</h3>
          <p data-i18n="cardInfoDesc">Full descriptions of progress cards</p>
        </div>
      </div>
    </section>

    <footer class="footer">
      <div class="footer-content">
        <p>‚öîÔ∏è <span data-i18n="footerText">Catan Helper ‚Ä¢ Not affiliated with Catan GmbH</span><br>
        <a href="https://github.com" target="_blank" data-i18n="viewOnGithub">View on GitHub</a></p>
      </div>
      <div class="lang-selector">
        <select id="langSelect" class="lang-select">
          <option value="en">English</option>
          <option value="de">Deutsch</option>
        </select>
      </div>
    </footer>
  </div>

  <script>
    // Tiny loader bookmarklet - loads helper.js from GitHub Pages, auto-updates!
    // Uses Date.now() timestamp to bust browser cache and ensure fresh code on every use
    const bookmarkletCode = `javascript:(function(){var s=document.createElement('script');s.src='https://piravlos.github.io/catan/helper.js?t='+Date.now();document.head.appendChild(s)})();`;

    // Set the bookmarklet href
    document.getElementById('bookmarkletLink').href = bookmarkletCode;
    document.getElementById('codeBox').textContent = bookmarkletCode;

    function copyCode(btn) {
      const originalText = btn.textContent;

      function showSuccess() {
        btn.textContent = '‚úÖ ' + translations[currentLang].copied;
        btn.style.background = '#4caf50';
        setTimeout(() => {
          btn.textContent = originalText;
          btn.style.background = '';
        }, 2000);
      }

      function showError() {
        prompt(translations[currentLang].copyManually, bookmarkletCode);
      }

      navigator.clipboard.writeText(bookmarkletCode).then(showSuccess).catch(() => {
        // Fallback for older browsers / iOS
        const ta = document.createElement('textarea');
        ta.value = bookmarkletCode;
        ta.style.cssText = 'position:fixed;opacity:0;top:0;left:0';
        document.body.appendChild(ta);
        ta.focus();
        ta.select();
        try {
          document.execCommand('copy');
          showSuccess();
        } catch(e) {
          showError();
        }
        document.body.removeChild(ta);
      });
    }

    // ===== INTERNATIONALIZATION =====
    let currentLang = localStorage.getItem('ch-lang') || 'en';

    const translations = {
      en: {
        title: "Catan Helper",
        subtitle: "Cities & Knights Companion Tool",
        desktopInstall: "Desktop Installation",
        dragToBookmarks: "Drag this button to your bookmarks bar:",
        catanHelper: "Catan Helper",
        or: "or",
        copyToClipboard: "Copy to Clipboard",
        tipLabel: "Tip:",
        bookmarksTip: "Can't see your bookmarks bar? Press <code>Ctrl+Shift+B</code> (Windows) or <code>Cmd+Shift+B</code> (Mac) to show it. Alternatively, copy the code and paste it as a bookmark URL.",
        autoUpdates: "Auto-Updates:",
        autoUpdatesTip: "Install once, always get the latest version! The tiny loader fetches the newest code automatically every time you use it.",
        mobileInstall: "Mobile Installation",
        iphoneSafari: "iPhone / Safari",
        iphoneStep1: "Tap <strong>\"Copy Code\"</strong> below",
        iphoneStep2: "Bookmark any page (Share ‚Üí Add Bookmark)",
        iphoneStep3: "Open Bookmarks, find it, tap <strong>Edit</strong>",
        iphoneStep4: "Delete the URL, <strong>paste the code</strong>",
        iphoneStep5: "Save!",
        androidChrome: "Android / Chrome",
        androidStep1: "Tap <strong>\"Copy Code\"</strong> below",
        androidStep2: "Tap ‚ãÆ ‚Üí Bookmarks ‚Üí ‚ãÆ on any bookmark ‚Üí Edit",
        androidStep3: "Replace URL with <strong>pasted code</strong>",
        androidStep4: "Or create new bookmark and paste as URL",
        copyCode: "COPY CODE",
        howToUse: "How to Use",
        step1Title: "Open your Catan game",
        step1Desc: "Go to your game at <code>g.csdu.co.uk</code>",
        step2Title: "Activate the helper",
        step2Desc: "Click the bookmarklet (desktop) or type its name in the URL bar (mobile)",
        step3Title: "View your dashboard",
        step3Desc: "See resources, building options, dev tracks & card descriptions",
        mobileTipLabel: "Mobile tip:",
        mobileTip: "The helper covers the full screen. Tap \"Show Game\" to see the board, run the bookmarklet again to bring back the helper.",
        features: "Features",
        resourcesTitle: "Resources",
        resourcesDesc: "All resources & commodities at a glance",
        devTracksTitle: "Dev Tracks",
        devTracksDesc: "Trade, Science & Politics levels",
        buildGuideTitle: "Build Guide",
        buildGuideDesc: "See what you can afford to build",
        cardInfoTitle: "Card Info",
        cardInfoDesc: "Full descriptions of progress cards",
        footerText: "Catan Helper ‚Ä¢ Not affiliated with Catan GmbH",
        viewOnGithub: "View on GitHub",
        copied: "Copied!",
        copyManually: "Copy this code manually:"
      },
      de: {
        title: "Catan Helfer",
        subtitle: "St√§dte & Ritter Begleiter-Tool",
        desktopInstall: "Desktop-Installation",
        dragToBookmarks: "Ziehe diesen Button in deine Lesezeichen-Leiste:",
        catanHelper: "Catan Helfer",
        or: "oder",
        copyToClipboard: "In Zwischenablage kopieren",
        tipLabel: "Tipp:",
        bookmarksTip: "Lesezeichen-Leiste nicht sichtbar? Dr√ºcke <code>Strg+Umschalt+B</code> (Windows) oder <code>Cmd+Umschalt+B</code> (Mac). Alternativ kopiere den Code und f√ºge ihn als Lesezeichen-URL ein.",
        autoUpdates: "Auto-Updates:",
        autoUpdatesTip: "Einmal installieren, immer die neueste Version! Der kleine Loader l√§dt bei jeder Nutzung automatisch den neuesten Code.",
        mobileInstall: "Mobile Installation",
        iphoneSafari: "iPhone / Safari",
        iphoneStep1: "Tippe unten auf <strong>\"Code kopieren\"</strong>",
        iphoneStep2: "Beliebige Seite als Lesezeichen speichern (Teilen ‚Üí Lesezeichen hinzuf√ºgen)",
        iphoneStep3: "Lesezeichen √∂ffnen, finden und <strong>Bearbeiten</strong> tippen",
        iphoneStep4: "URL l√∂schen und <strong>Code einf√ºgen</strong>",
        iphoneStep5: "Speichern!",
        androidChrome: "Android / Chrome",
        androidStep1: "Tippe unten auf <strong>\"Code kopieren\"</strong>",
        androidStep2: "Tippe ‚ãÆ ‚Üí Lesezeichen ‚Üí ‚ãÆ bei einem Lesezeichen ‚Üí Bearbeiten",
        androidStep3: "URL durch <strong>eingef√ºgten Code</strong> ersetzen",
        androidStep4: "Oder neues Lesezeichen erstellen und Code als URL einf√ºgen",
        copyCode: "CODE KOPIEREN",
        howToUse: "Anleitung",
        step1Title: "√ñffne dein Catan-Spiel",
        step1Desc: "Gehe zu deinem Spiel auf <code>g.csdu.co.uk</code>",
        step2Title: "Aktiviere den Helfer",
        step2Desc: "Klicke das Lesezeichen (Desktop) oder tippe den Namen in die URL-Leiste (Mobil)",
        step3Title: "Sieh dir dein Dashboard an",
        step3Desc: "Rohstoffe, Bau-Optionen, Entwicklungsstufen & Kartenbeschreibungen",
        mobileTipLabel: "Mobil-Tipp:",
        mobileTip: "Der Helfer √ºberdeckt den ganzen Bildschirm. Tippe \"Spiel anzeigen\" um das Brett zu sehen, starte das Lesezeichen erneut um den Helfer zur√ºckzuholen.",
        features: "Funktionen",
        resourcesTitle: "Rohstoffe",
        resourcesDesc: "Alle Rohstoffe & Waren auf einen Blick",
        devTracksTitle: "Entwicklung",
        devTracksDesc: "Handel, Wissenschaft & Politik Stufen",
        buildGuideTitle: "Bau√ºbersicht",
        buildGuideDesc: "Sieh was du dir leisten kannst",
        cardInfoTitle: "Karten-Info",
        cardInfoDesc: "Vollst√§ndige Beschreibungen der Fortschrittskarten",
        footerText: "Catan Helfer ‚Ä¢ Nicht mit Catan GmbH verbunden",
        viewOnGithub: "Auf GitHub ansehen",
        copied: "Kopiert!",
        copyManually: "Kopiere diesen Code manuell:"
      }
    };

    function t(key) {
      return translations[currentLang][key] || translations.en[key] || key;
    }

    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('ch-lang', lang);
      updatePageLanguage();
    }

    function updatePageLanguage() {
      // Update all translatable elements
      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (el.tagName === 'INPUT' || el.tagName === 'BUTTON') {
          el.textContent = t(key);
        } else {
          el.innerHTML = t(key);
        }
      });

      // Update language selector
      document.getElementById('langSelect').value = currentLang;

      // Update HTML lang attribute
      document.documentElement.lang = currentLang;
    }

    // Initialize language on page load
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('langSelect').value = currentLang;
      updatePageLanguage();

      document.getElementById('langSelect').addEventListener('change', (e) => {
        setLanguage(e.target.value);
      });
    });
  </script>
</body>
</html>
